<!DOCTYPE html>
<html>
  <head>
    <title>Metamorph Hacks</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.46" />
<title>Morphs in linked-swissbib :: Metamorph Hacks</title>
<link rel="shortcut icon" href="/metamorph-hacks/images/favicon.png" type="image/x-icon" />
<link href="/metamorph-hacks/css/font-awesome.min.css" rel="stylesheet">
<link href="/metamorph-hacks/css/nucleus.css" rel="stylesheet">
<link href="/metamorph-hacks/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/metamorph-hacks/css/bootstrap.min.css">
<script src="/metamorph-hacks/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/sschuepbach.github.io\/metamorph-hacks";
</script>
<link rel="stylesheet" href="/metamorph-hacks/css/custom.css">


    
  </head>
  <body data-url="/metamorph-hacks/anhang/lsb-morphs/">
    
      <header>
  <div class="logo">
    
	
  
    <a class="baselink" href="https://sschuepbach.github.io/metamorph-hacks">Metamorph Hacks</a>
  

  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="https://github.com/vjeantet/hugo-theme-docdock"  rel="noopener">
                  <i class='fa fa-github'></i> <label>Github repo</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://github.com/vjeantet/hugo-theme-docdock/archive/master.zip"  rel="noopener">
                  <i class='fa fa-cloud-download'></i> <label>Download</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://gohugo.io/"  rel="noopener">
                  <i class='fa fa-bookmark'></i> <label>Hugo Documentation</label>
                </a>
            </li>
            <li class="" role="">
                <a href="/metamorph-hacks/credits"  rel="noopener">
                  <i class='fa fa-bullhorn'></i> <label>Credits</label>
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/metamorph-hacks/" class="dd-item">
          <a href="/metamorph-hacks/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/metamorph-hacks/funktionen/" class="dd-item haschildren
        ">
      <div>
      <a href="/metamorph-hacks/funktionen/">Funktionen</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/metamorph-hacks/funktionen/datenfelder/" class="dd-item">
        <div>
          <a href="/metamorph-hacks/funktionen/datenfelder/">
            Werte auslesen
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/metamorph-hacks/funktionen/transformationen/" class="dd-item">
        <div>
          <a href="/metamorph-hacks/funktionen/transformationen/">
            Transformationen
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/metamorph-hacks/funktionen/filter/" class="dd-item">
        <div>
          <a href="/metamorph-hacks/funktionen/filter/">
            Filter
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/metamorph-hacks/funktionen/nachschlagetabellen/" class="dd-item">
        <div>
          <a href="/metamorph-hacks/funktionen/nachschlagetabellen/">
            Nachschlagetabellen
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/metamorph-hacks/collectors/" class="dd-item haschildren
        ">
      <div>
      <a href="/metamorph-hacks/collectors/">Collectors</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/metamorph-hacks/collectors/uebersicht/" class="dd-item">
        <div>
          <a href="/metamorph-hacks/collectors/uebersicht/">
            Übersicht collectors
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/metamorph-hacks/collectors/ausgabesteuerung/" class="dd-item">
        <div>
          <a href="/metamorph-hacks/collectors/ausgabesteuerung/">
            Ausgabesteuerung
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/metamorph-hacks/collectors/if-anweisungen/" class="dd-item">
        <div>
          <a href="/metamorph-hacks/collectors/if-anweisungen/">
            if-Anweisungen
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/metamorph-hacks/modularisierung/" class="dd-item haschildren
        ">
      <div>
      <a href="/metamorph-hacks/modularisierung/">Modularisierung</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/metamorph-hacks/modularisierung/rekursion/" class="dd-item">
        <div>
          <a href="/metamorph-hacks/modularisierung/rekursion/">
            Rekursion
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/metamorph-hacks/modularisierung/variablen/" class="dd-item">
        <div>
          <a href="/metamorph-hacks/modularisierung/variablen/">
            Variablen
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/metamorph-hacks/modularisierung/makros/" class="dd-item">
        <div>
          <a href="/metamorph-hacks/modularisierung/makros/">
            Makros
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/metamorph-hacks/modularisierung/includes/" class="dd-item">
        <div>
          <a href="/metamorph-hacks/modularisierung/includes/">
            Includes
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/metamorph-hacks/kochbuch/" class="dd-item haschildren
        ">
      <div>
      <a href="/metamorph-hacks/kochbuch/">Kochbuch</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/metamorph-hacks/kochbuch/literale-in-entitaeten-wiederverwenden/" class="dd-item">
        <div>
          <a href="/metamorph-hacks/kochbuch/literale-in-entitaeten-wiederverwenden/">
            Literale in Entitäten wiederverwenden
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/metamorph-hacks/anhang/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/metamorph-hacks/anhang/">Anhang</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/metamorph-hacks/anhang/lsb-morphs/" class="dd-item active">
        <div>
          <a href="/metamorph-hacks/anhang/lsb-morphs/">
            Morphs in linked-swissbib
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/metamorph-hacks/anhang/ressourcen/" class="dd-item">
        <div>
          <a href="/metamorph-hacks/anhang/ressourcen/">
            Ressourcen
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/metamorph-hacks/anhang/versionsgeschichte/" class="dd-item">
        <div>
          <a href="/metamorph-hacks/anhang/versionsgeschichte/">
            Versionsgeschichte
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/metamorph-hacks/funktionen/" >
   Funktionen</option>
    <option value="/metamorph-hacks/collectors/" >
   Collectors</option>
    <option value="/metamorph-hacks/modularisierung/" >
   Modularisierung</option>
    <option value="/metamorph-hacks/kochbuch/" >
   Kochbuch</option>
    <option value="/metamorph-hacks/anhang/" >
   Anhang</option> 
      <option value="/metamorph-hacks/anhang/lsb-morphs/"  selected>- Morphs in linked-swissbib</option>
      <option value="/metamorph-hacks/anhang/ressourcen/" >- Ressourcen</option>
      <option value="/metamorph-hacks/anhang/versionsgeschichte/" >- Versionsgeschichte</option>
  



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="">
        </div>
        <script type="text/javascript" src="/metamorph-hacks/js/lunr.min.js"></script>
        <script type="text/javascript" src="/metamorph-hacks/js/auto-complete.js"></script>
        <link href="/metamorph-hacks/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/sschuepbach.github.io\/metamorph-hacks";
          
        </script>
        <script type="text/javascript" src="/metamorph-hacks/js/search.js"></script>
      </div>
    

    <h1>Morphs in linked-swissbib</h1>
    
    
    
    

<h2 id="documentmorph-xml-https-github-com-linked-swissbib-mfworkflows-blob-removed-mfrunner-transformation-indexworkflows-documentmorph-xml"><a href="https://github.com/linked-swissbib/mfWorkflows/blob/removed-mfrunner/transformation/indexWorkflows/documentMorph.xml">documentMorph.xml</a></h2>

<p>Erstellt Metadaten der Aufnahme. Pro <code>bibliographicRecord</code>-Ressource sollte
auch eine <code>document</code>-Ressource vorhanden sein.</p>

<h2 id="enrichedmorph-xml-https-github-com-linked-swissbib-mfworkflows-blob-removed-mfrunner-transformation-indexworkflows-enrichedmorph-xml"><a href="https://github.com/linked-swissbib/mfWorkflows/blob/removed-mfrunner/transformation/indexWorkflows/enrichedMorph.xml">enrichedMorph.xml</a></h2>

<p>Verarbeitet Datensätze im <em>NTriples</em>-Format und transformiert sie zu
<em>JSON-LD</em>. Datensatz-Typen sind &ldquo;Organisationen&rdquo; (siehe Anmerkungen dazu im Abschnitt &ldquo;organisationMorph.xml&rdquo;) und &ldquo;Personen&rdquo;. Aufgrund der Syntax-Spezifika von <em>NTriples</em> sowie für die
Normalisierung der Inputdaten, welche aus heterogenen Quellen stammen
(DBPedia, VIAF, vorverarbeitete Swissbib-Daten), müssen die meisten Werte
modifiziert werden. Die drei wichtigsten Fälle, die jeweils in einem
<code>&lt;macro&gt;</code>-Element definiert werden:</p>

<ul>
<li>Makro <code>year</code>: Jahresangaben sind immer nur auf das (vierstellige) Jahr genau, und nicht etwa in der Form <code>yyyy-mm-dd</code>.</li>
<li>Makro <code>uri</code>: DBPedia-Links sollen immer zu <code>https://</code>-Links
umgewandelt werden</li>
<li>Makro <code>language-tag</code>: Das Sprach-Tag, welches in <em>NTriples</em> mit einem
<code>@</code>-Trennzeichen an das Literal angefügt wird, wird abgetrennt und in ein
eigenes Literal (<code>lang</code> überführt).</li>
</ul>

<p>Personen und &ldquo;Organsationen&rdquo; haben verschiedene JSON-LD-Kontexte. Daher
gibt es zwei <code>&lt;combine&gt;</code>-Blöcke zur Erstellung des jeweiligen Kontextes, wo überprüft wird, ob es sich
um einen Datensatz vom Typ <code>Person</code> oder <code>Organization</code> handelt. Je nach
dem werden im betreffenden Kontext-Block die Daten weitergeleitet oder nicht.</p>

<h2 id="itemmorph-xml-https-github-com-linked-swissbib-mfworkflows-blob-removed-mfrunner-transformation-indexworkflows-itemmorph-xml"><a href="https://github.com/linked-swissbib/mfWorkflows/blob/removed-mfrunner/transformation/indexWorkflows/itemMorph.xml">itemMorph.xml</a></h2>

<p>Erstellt Exemplardaten primär basierend auf dem nicht-kanonischen MARC-Feld
<code>949</code>. Hinweise:</p>

<ul>
<li>Die ID ist eine Kombination aus einem konstanten Präfix -
<code>https://data.swissbib.ch/item/</code> -, dem Namen des Verbundes
(Information aus Unterfeld <code>949??.B</code>) sowie einem eindeutigen Hash-Wert,
der auf verschiedenen Werten aus den <code>949</code>er-Unterfeldern beruht. Der
Hashwert wird mit der Klasse <a href="https://github.com/linked-swissbib/swissbib-metafacture-commands/blob/master/src/main/java/org/swissbib/linked/mf/morph/functions/ItemHash.java"><code>ItemHash</code></a> erstellt.</li>
<li>In einer bibliographischen Aufnahme können selbstverständlich Daten zu
mehreren Exemplaren vorhanden sein. Dazu wird ein spezielles Verfahren
genutzt, welches Entitäten erstellt und in einem weiteren <em>command</em> diese
zu eigenen <em>records</em> umwandelt. Für Details siehe Hinweis-Block unten.</li>
<li>Der <code>&lt;combine&gt;</code>-Block, wo der Hashwert generiert wird, befindet sich
ausserhalb des <code>&lt;entity&gt;</code>-Blocks. Grund dafür ist das spezielle
Verhalten von Rekursionen, welche innerhalb von <em>collectors</em>
initialisiert werden. Für Details siehe Hinweise im <a href="https://sschuepbach.github.io/metamorph-hacks/modularisierung/rekursion/">entsprechenden
Kapitel</a>.</li>
<li>In einem weiteren <code>&lt;combine&gt;</code>-Element, <code>foaf:page</code>, wird ein Link zum
Katalogisat im jeweiligen Katalog erstellt. Dazu werden verschiedene Werte
an eine weitere Klasse zur Verarbeitung geschickt, <a href="https://github.com/linked-swissbib/swissbib-metafacture-commands/blob/master/src/main/java/org/swissbib/linked/mf/morph/functions/ItemLink.java"><code>ItemLink</code></a>.</li>
</ul>

<div class="notices info" ><p>Ein wiederholt genutzte Methode für Extraktion von mehreren
eigenständigen Ressourcen aus einer einzigen bibliographischen (Eingabe-)Ressource
ist die Erstellung von Entitäten (<code>entity</code>) in der betreffenden Morph-Datei.
Dieser <code>entity</code>-Block umfasst alle Literale, welche für die jeweilige
Zielressource benötigt werden. Nach dem <code>morph</code>-<em>command</em> folgt
<a href="https://github.com/linked-swissbib/swissbib-metafacture-commands/blob/master/src/main/java/org/swissbib/linked/mf/pipe/EntitySplitter.java"><code>entity-splitter</code></a>, das einzelne Entitäten eines Records einliest, diese aber als
eigentständige Records wieder ausgibt. Mithilfe des Parameters
<code>entityBoundary</code> lässt sich zudem für mehrfach geschachtelte Entitäten einstellen, ab welcher Stufe die Entitäten Records werden sollen.</p>
</div>


<h2 id="organisationmorph-xml-https-github-com-linked-swissbib-mfworkflows-blob-removed-mfrunner-transformation-indexworkflows-organisationmorph-xml"><a href="https://github.com/linked-swissbib/mfWorkflows/blob/removed-mfrunner/transformation/indexWorkflows/organisationMorph.xml">organisationMorph.xml</a></h2>

<p>Erstellt &ldquo;Organisations&rdquo;-Entitäten (Organisationen, Institutionen, Kongresse
etc.) auf Basis von Marc-Feld
<a href="https://www.loc.gov/marc/bibliographic/concise/bd110.html"><code>110</code></a>,
<a href="https://www.loc.gov/marc/bibliographic/concise/bd111.html"><code>111</code></a>,
<a href="https://www.loc.gov/marc/bibliographic/concise/bd710.html"><code>710</code></a> oder
<a href="https://www.loc.gov/marc/bibliographic/concise/bd711.html"><code>711</code></a>.</p>

<ul>
<li>Um solche Entitäten zu erstellen, wird der <code>entity</code>-<em>collector</em> verwendet.
Solche Unter-Entitäten werden dann im nächsten Metafacture-Schritt zu
eigenen Records &ldquo;aufgewertet&rdquo;. Für Details siehe Hinweis-Block in
Abschnitt &ldquo;itemMorph.xml&rdquo;.</li>
<li>Da der Identifier analog zu <code>resourceMorph.xml</code> und <code>organisationMorph.xml</code>
mit dem Hash-Mechanismus erstellt wird, ist es für Entitäten aus den Feldern
<code>110</code> und <code>111</code> zwingend, dass sie erst mit Unterfeld
<a href="https://www.loc.gov/marc/bibliographic/concise/bd245.html"><code>245*.a</code></a>
weitergeleitet werden.</li>
<li>Damit eine Entität für Feld <code>110</code> oder <code>111</code> nicht &ldquo;aus Versehen&rdquo;
weitergeleitet wird (sprich: es gibt in der Ressource gar kein
entsprechendes Feld), ist es wichtig, dass alle Bestandteile des
<em>collectors</em> nur getriggert werden, wenn tatsächlich ein entsprechendes
(Unter-)Feld vorhanden ist. Denn wie im Kapitel
&ldquo;<a href="https://sschuepbach.github.io/metamorph-hacks/collectors/ausgabesteuerung/">Ausgabesteuerung</a>&rdquo; beschrieben, wird ein <em>collector</em> auch bei einem expliziten <code>flushWith</code> nur weitergeleitet, wenn er nicht leer ist. Entsprechend abgesichert wird an verschiedenen Stellen: Alle Literale (auch Konstanten) haben als Source <code>110??</code>, <code>111??</code> oder eines ihrer Unterfelder; dasselbe gilt für Literale in Kind-<em>collectors</em>; schliesslich wird bei der Hashwert-Generierung in <a href="https://github.com/linked-swissbib/mfWorkflows/blob/removed-mfrunner/transformation/indexWorkflows/morphModules/authorHash110.xml"><code>authorHash110</code></a> und <a href="https://github.com/linked-swissbib/mfWorkflows/blob/removed-mfrunner/transformation/indexWorkflows/morphModules/authorHash111.xml"><code>authorHash111</code></a> mit einer <code>if</code>-Anweisung getetest, ob entsprechende Unterfelder vorhanden sind - ansonsten wird kein Hash (auch kein <code>NO_HASH</code>!) generiert.</li>
<li>Dieselbe Vorsichtsmassnahme ist für Entitäten der Felder <code>710</code> und <code>711</code>
nicht notwendig, da sie mit dem demselben Feld getriggert werden, aus dem
sie ihre Werte beziehen.</li>
</ul>

<h2 id="personmorph-xml-https-github-com-linked-swissbib-mfworkflows-blob-removed-mfrunner-transformation-indexworkflows-personmorph-xml"><a href="https://github.com/linked-swissbib/mfWorkflows/blob/removed-mfrunner/transformation/indexWorkflows/personMorph.xml">personMorph.xml</a></h2>

<p>Erstellt Personen-Entitäten auf Basis von MARC-Feld <a href="https://www.loc.gov/marc/bibliographic/concise/bd100.html"><code>100</code></a> (1.
Indikator <code>0</code> oder <code>1</code>) oder <a href="https://www.loc.gov/marc/bibliographic/concise/bd700.html"><code>700</code></a> (1. Indikator dito). Der grundsätzlich Mechanismus ist derselbe wie bei <code>itemMorph.xml</code> und <code>organisationMorph.xml</code>: Literale werden pro relevantem Feld in <code>entity</code>-Blöcke zusammengefasst und anschliessend zu eigenständigen Ressourcen umgewandelt (für genauere Erläuterungen dazu s. Info-Box im Abschnitt zu <code>itemMorph.xml</code>). Zudem sind dieselben &ldquo;Sicherheitsmassnahmen&rdquo; wie bei <code>organisationMorph.xml</code> für Feld <code>100</code>-Fälle implementiert, um ein unabsichtliches Weiterleiten einer Entität ohne Werte aus dem entsprechenden Feld zu verhindern.</p>

<h2 id="resourcemorph-xml-https-github-com-linked-swissbib-mfworkflows-blob-removed-mfrunner-transformation-indexworkflows-resourcemorph-xml"><a href="https://github.com/linked-swissbib/mfWorkflows/blob/removed-mfrunner/transformation/indexWorkflows/resourceMorph.xml">resourceMorph.xml</a></h2>

<p>Erstellt das eigentliche Katalogisat und linkt (bzw. wird verlinkt durch)
die Ressourcen <code>Person</code>, <code>Organisation</code>, <code>Document</code>, <code>Item</code> sowie die separat
erstellte <code>Work</code>.</p>


    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/metamorph-hacks/anhang/" title="Anhang"> <i class="fa fa-chevron-left"></i><label>Anhang</label></a>
    <a class="nav nav-next" href="/metamorph-hacks/anhang/ressourcen/" title="Ressourcen" style="margin-right: 0px;"><label>Ressourcen</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  
    <div class="date">
        <i class='fa fa-calendar'></i>  13/08/2018
    </div>
    

    <div class="github-link">
      <a href="https://github.com/vjeantet/hugo-theme-docdock/edit/master/exampleSite/content/anhang/lsb-morphs.md" target="blank"><i class="fa fa-code-fork"></i>
        </a>
    </div>
  </div>


	<div>


  
    
  



	</div>
</footer>

<script src="/metamorph-hacks/js/clipboard.min.js"></script>

<link href="/metamorph-hacks/css/featherlight.min.css" rel="stylesheet">
<script src="/metamorph-hacks/js/featherlight.min.js"></script>



<script src="/metamorph-hacks/theme-flex/script.js"></script>

    

    
    

    
  </body>
</html>